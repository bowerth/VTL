 


  <div class="row no-gutters">
    <div class="col-lg-12 col-xl-9 py-3">
            <h1 id="reading-csv_toc_using-csv-in-vtl-engine">Using CSV in VTL Engine</h1> 
<p>The VTL Engine allows you to use data contained in CSV files that you</p> 
<section> 
 <h2 id="reading-csv_toc_reading-csv-data-from-vtl-scripts">Reading CSV data from VTL scripts</h2> 
 <p>You can reference a CSV file in a VTL script by using a specially formatted identifier. This file will be loaded as a standard VTL dataset. For example, in the following script:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>d1 := 'csv:/user/john/my.csv'
</pre> 
  </div> 
 </div> 
 <p>d1 will be defined as an alias pointing to the actual CSV data in the file.</p> 
 <p>You can also directly reference a CSV file in expressions, without having to assign an alias to it first:</p> 
 <div class="source"> 
  <div class="source"> 
   <pre>d1 := 'csv:/user/john/left.csv'#MEASURE + 'csv:/user/john/right.csv'#MEASURE 
</pre> 
  </div> 
 </div> 
 <p>In this case, d1 will contain the sum of column MEASURE for all the matching rows of the two CSV files.</p> 
</section> 
<section> 
 <h2 id="reading-csv_toc_formatting-of-csv-files-for-vtl">Formatting of CSV files for VTL</h2> 
 <p>To be able to read CSV data from a text file, the VTL Engine requires for it to be specially formatted in accordance to the engine parsing rules.</p> 
 <section> 
  <h3 id="reading-csv_toc_formatting-values">Formatting values</h3> 
  <p>The only allowed separator is the comma.</p> 
  <p>For numbers, the decimal separator is the dot, and there must not be any thousands separator. The scientific notation is supported only for the Number domain.</p> 
  <p>For strings, they must be enclosed in double quotes only if they contain commas. When quoting strings, “double double quotes” are replaced by a single double quotes character, and the enclosing double quotes are omitted from the value.</p> 
 </section> 
 <section> 
  <h3 id="reading-csv_toc_formatting-headers">Formatting headers</h3> 
  <p>The header must be always the first row of the CSV file and it must be formatted according to the following rules.</p> 
  <p>Each column name in the header must be composed only of letters, digits and the underscore.</p> 
  <p>Each column name may preceded by exactly one of the following: * A dollar character, meaning the column is to be treated as an identifier; * A sharp character, meaning the column is to be treated as an attribute. * No character, meaning the column is to be treated as a measure.</p> 
  <p>Each column name must be followed by exacly one of the following:</p> 
  <ul> 
   <li>=Number, meaning the column contains double precision floating point numbers;</li> 
   <li>=Integer, meaning the column contains signed integer numbers in the range from -2<sup>63</sup> to 2<sup>63</sup>;</li> 
   <li>=String, meaning the column contains quoted or unquoted strings;</li> 
   <li>=Boolean, meaning the column contains the literals “True” or “False”;</li> 
   <li>=Date[pattern], meaning the column contains dates formatted according to “pattern”;</li> 
   <li>=Time_Period[pattern], meaning the column contains time periods formatted according to “pattern”;</li> 
   <li>=cl_name, meaning the column contain codes from the codelist “cl_name” that must be already defined in the metadata repository.</li> 
  </ul> 
  <p>Here’s an example of a valid header for consumption by the VTL Engine:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>$TIME_PERIOD=Date[YYYY-MM-DD],$REF_AREA=CL_COUNTRY,OBS_VALUE=Number,#OBS_STATUS=String
</pre> 
   </div> 
  </div> 
 </section> 
</section>
        </div>
    <div class="d-none d-sm-none d-md-none d-lg-none d-xl-block col-xl-3">
        <div class="feedback-links">
            <ul class="nav flex-column flex-nowrap">
                <li class="nav-item">
                    <a class="nav-link" href="https://github.com/vpinna80/VTL/src\site\markdown/reading-csv.md.vm"><i class="far fa-edit" target="_blank" rel="noopener noreferrer"></i> Improve this page</a>
                </li>
            </ul>
        </div>
            <div id="m-toc-sidebar" class="d-print-none m-toc-sidebar-enabled m-toc-sidebar-expanded m-toc-sidebar-autoexpandable toc-sidebar-fixed">
                <nav id="m-toc-sidebar-nav flex-column">
                <ul class="m-nav--sidebar nav flex-column flex-nowrap">
    <li class="h1">
        <a class="nav-link" href="#reading-csv_toc_using-csv-in-vtl-engine" title="Using CSV in VTL Engine">Using CSV in VTL Engine</a>
    </li>
    <li class="h2">
        <a class="nav-link" href="#reading-csv_toc_reading-csv-data-from-vtl-scripts" title="Reading CSV data from VTL scripts">Reading CSV data from VTL scripts</a>
    </li>
    <li class="h2">
        <a class="nav-link" href="#reading-csv_toc_formatting-of-csv-files-for-vtl" title="Formatting of CSV files for VTL">Formatting of CSV files for VTL</a>
    </li>
    <ul class="nav flex-column flex-nowrap nav-collapsible">
            <li class="h3">
        <a class="nav-link" href="#reading-csv_toc_formatting-values" title="Formatting values">Formatting values</a>
    </li>
    <li class="h3">
        <a class="nav-link" href="#reading-csv_toc_formatting-headers" title="Formatting headers">Formatting headers</a>
    </li>
    </ul>
                    </ul>
                </nav>
           </div>
    </div>
</div>
